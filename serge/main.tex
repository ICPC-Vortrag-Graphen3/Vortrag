\pgfdeclarelayer{bg}
\pgfsetlayers{bg,main}
\setbeamercovered{invisible}

\section{UVa 10779 - Collector's Problem}
\subsection{Aufgabenstellung}
    \begin{frame}{UVa 10779 - Collector's Problem}
        \begin{block}{UVa 10779 - Collector's Problem}

        \end{block}

    \end{frame}

\subsection{Lösung}

\tikzstyle{source}=[circle, fill=red!25]
\tikzstyle{target} = [circle, fill=blue!25]
\tikzstyle{otherCollector} = [circle, fill=green!25]
\tikzstyle{card} = [circle, fill=black!25]


\begin{frame}{Ohne in Doppelte eintauschen}
    \begin{figure}
        \begin{tikzpicture}[scale=0.7]
            \node[source, visible on=<{1-4, 8-}>] (BobS) at (0,0) {BobS};
            \node[target, visible on=<{1-4, 8-}>] (BobT) at (13,0) {BobT};
            \foreach \i in {1,...,5} {
                \node[card, visible on=<{2-4, 8-}>] (BobWantsType_\i) at (10, {2*(\i-3)}) {$\i_{w}$};
                \draw[->, visible on=<{2-4, 8-}>] (BobWantsType_\i) -- (BobT) node [midway, above, sloped]
                (wantToBob_\i) {$1$};
            }
            \foreach \i/\amount in {{1/2}, {3/1}, {4/2}, {5/3}}
            {
                \node[card, visible on=<{3-4, 8-}>] (BobHasType_\i) at (3, {2*(\i-3)}) {$\i_{h}$};
                \draw [->, visible on=<{3-4, 8-}>] (BobS) -- (BobHasType_\i) node [midway, above, sloped]
                (amount_\i) {$\amount$};
                \draw [->, visible on=<{4, 8-}>] (BobHasType_\i) -- (BobWantsType_\i) node [midway, above, sloped]
                (hasToWant_\i) {$1$};
            }
            \node[otherCollector, visible on=<{5-}>] (A) at (6.5,-2) {A};
            \foreach \i in {1,4}
            {
                \node[card, visible on=<{6-7}>] (AWantsType_\i) at (3, {2*(\i-3)}) {$\i$};
                \draw [->, visible on=<{6-7}>] (AWantsType_\i) -- (A) node [midway, above, sloped]
                (asWantToAs_\i) {$1$};
                \draw [->, visible on=<{8-}>] (BobHasType_\i) -- (A) node [midway, above, sloped]
                (bobHasToAs_\i) {$1$};
            }
            \foreach \i/\amount in {{2/3}}
            {
                \node[card, visible on=<{7}>] (AHasType_\i) at (10, {2*(\i-3)}) {$\i$};
                \draw [->, visible on=<{7}>] (A) -- (AHasType_\i) node [midway, above, sloped]
                (asToHas_\i) {$\amount$};
                \draw [->, visible on=<{8-}>] (A) -- (BobWantsType_\i) node [midway, above, sloped]
                (asToBobWants_\i) {$\amount$};
            }

        \end{tikzpicture}
    \end{figure}
\end{frame}

\begin{frame}{Mit in Doppelte eintauschen}
    \begin{figure}
        \begin{tikzpicture}[scale=0.7]
            \node[source, visible on=<{1-}>] (BobS) at (0,0) {BobS};
            \node[target, visible on=<{1-}>] (BobT) at (13,0) {BobT};
            \foreach \i in {1,...,5} {
                \node[card, visible on=<{1-}>] (BobWantsType_\i) at (10, {2*(\i-3)}) {$\i_{w}$};
                \draw[->, visible on=<{1-}>] (BobWantsType_\i) -- (BobT) node [midway, above, sloped]
                (wantToBob_\i) {$1$};
            }
            \foreach \i/\amount in {{1/2}, {2/0}, {3/1}, {4/2}, {5/3}}
            {
                \node[card, visible on=<{1-}>] (BobHasType_\i) at (3, {2*(\i-3)}) {$\i_{h}$};
                \draw [->, visible on=<{1-}>] (BobS) -- (BobHasType_\i) node [midway, above, sloped]
                (amount_\i) {$\amount$};
                \draw [->, visible on=<{1-}>] (BobHasType_\i) -- (BobWantsType_\i) node [midway, above, sloped]
                (hasToWant_\i) {$1$};
            }
            \begin{pgfonlayer}{bg}
                \node[circle, fill=red!25, text=red!25, visible on=<{1}>] at (amount_2) {0};
            \end{pgfonlayer}
            \node[otherCollector, visible on=<{2-}>] (A) at (6.5,-1) {A};
            \foreach \i in {1,4}
            {
                \draw [->, visible on=<{2-}>] (BobHasType_\i) -- (A) node [midway, above, sloped]
                (bobHasToAs_\i) {$1$};
            }
            \foreach \i/\amount in {{2/3}}
            {
                \draw [->, visible on=<{2-}>] (A) -- (BobHasType_\i) node [midway, above, sloped]
                (asToBobWants_\i) {$\amount$};
            }

            \begin{pgfonlayer}{bg}
            \foreach \source/\dest in {{BobS/BobHasType_4}, {BobHasType_4/A}, {A/BobHasType_2}, {BobHasType_2/BobWantsType_2}, {BobWantsType_2/BobT}}
                \draw[-, red!50, line width=5pt, visible on=<3->] (\source) -- (\dest);
            \end{pgfonlayer}
        \end{tikzpicture}
    \end{figure}
\end{frame}

\section{Variationen von Network Flow}
\subsection{Multi-source \& Multi-sink}
\begin{frame}{Multi-source \& Multi-sink}
    \begin{itemize}
        \pause\item Mehrere sources $s_0,\dots,s_i$ und sinks $t_0,\dots,t_j$ existieren
        \pause\item Graphen zusammenfassen, indem man eine super source $ss$ und super sink
        $st$ erstellt
        \pause\item \(\forall x \leq i \in \mathbb{N}_0 : (ss, s_x) \text{ zu $E$ mit
        Gewicht $\infty$ hinzufügen}\)
        \item \(\forall y \leq j \in \mathbb{N}_0 : (t_y, st) \text{ zu $E$ mit
        Gewicht $\infty$ hinzufügen}\)
        \pause\item Entsprechenden Algorithmus von $ss$ zu $st$ laufen lassen
    \end{itemize}
\end{frame}

\subsection{Knoten Kapazität}
\begin{frame}{Knoten Kapazität}
    \begin{itemize}
        \pause\item Knoten $v_0,\dots,v_i$ haben eigene Kapazität
        \pause\item Knoten in $v\_in_x$ und $v\_out_x$ aufteilen mit gewichteter Kante
        \pause\item \(V' = \set{v\_in_0, v\_out_0, \dots, v\_in_i, v\_out_i}\)
        \pause\item \(E' = E \cup \set{(v\_in_x, v\_out_x) : x \leq i \in \mathbb{N}_0}\)
        \pause\item \(\forall x \leq i \in \mathbb{N}_0 : w((v\_in_x, v\_out_x)) = w(v_x)\)
        \pause\item Doppelte Anzahl an Knoten!
    \end{itemize}
\end{frame}

\subsection{Min Cut}
\begin{frame}{Schnitt}
    \begin{block}{Definition}
        \pause Die Knotenmenge $V$ lässt sich in zwei disjunkte Teilmengen \(S, T
        \subseteq V\) mit dem Quellknoten $s$ in $S$ und dem Zielknoten $t$ in $T$
        aufteilen.\\\pause
        \(C = (S, T)\) ist dabei eine \textbf{Partition} von
        $V$, die man als \textbf{s-t Schnitt} bzw. \textbf{s-t cut} bezeichnet.\\\pause
        Die zu $C$ gehörige \textbf{Schnitt-Menge} bzw. \textbf{cut-set} ist
        definiert mit
        \[X_C \defas \set{(u, v) \in E \given u \in S, v \in T} = (S\times
        T)\cap E\]
        und dass $s$ und $t$ mit der Kantenmenge
        \(E' \defas E\setminus X_C\) getrennt wären \pause bzw. der Max Flow null ist.\\\pause
        Die \textbf{Kosten} des Schnittes sind definiert durch
        \(c(S, T) \defas \sum\nolimits_{(u, v) \in X_C} c(u, v)\)
    \end{block}
\end{frame}

\begin{frame}{Min Cut}
    \begin{block}{Definition}
        \pause Die Wahl von $S, T$ entscheidet die Kosten des Schnittes und der
        \textbf{Minimaler Schnitt} bzw. \textbf{Min Cut} ist jener Schnitt, für
        den die Kosten minimal sind.\\\pause
        Außerdem gilt für $X_C$ des minimalen Schnittes:
        \[\forall e \in X_C, X_C' = X_C \setminus e :
        \text{ Es besteht ein Weg von $s$ zu $t$ in } G(V, E \setminus X_C')\]
    \end{block}
\end{frame}

\begin{frame}{Berechnung Min Cut}
    \begin{itemize}
        \item Nebenprodukt von Max Flow
        \pause\item DFS/BFS von $s$ ausführen (nur Knoten mit streng positiver restlicher Kapazität
        traversierbar)
        \pause\item Jeder gefundene Knoten ist in $S$
        \pause\item \(T = V\setminus S\)
        \pause\item Alle Kanten in $X_C$ haben Restkapazität $0$ \(\implies\) Min
        Cut $=$ Max Flow
    \end{itemize}
\end{frame}

\begin{frame}{Aufgabe zu Min Cut \& Vertex Capacities}
    \begin{block}{UVa 11506 - Angry Programmer}

    \end{block}

\end{frame}